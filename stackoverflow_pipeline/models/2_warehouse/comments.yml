version: 2

models:
  - name: comments
    description: >
      This model transforms the `comments` source table into a structured format for 
      downstream analytics. It includes metadata about comments made by users.
    columns:
      - name: comment_pk
        description: >
          A unique primary key generated by hashing a combination of the `id`, 
          `creation_date`, and `user_id` fields. Ensures row-level uniqueness.
        tests:
          - not_null
          - unique
      - name: comment_id
        description: >
          A unique identifier for each comment. This field is tested for uniqueness 
          and cannot contain null values.
        tests:
          - not_null
          - unique
      - name: comment_text
        description: >
          The textual content of the comment. Contains the actual user input.
      - name: post_id
        description: >
          The identifier of the post associated with the comment. Links to the `posts` table.
      - name: user_id
        description: >
          The identifier of the user who made the comment. Links to the `users` table.
      - name: user_display_name
        description: >
          The display name of the user who made the comment. Useful for user-level insights.
      - name: score
        description: >
          The score (or votes) the comment received. Indicates its popularity or relevance.
      - name: created_at
        description: >
          The timestamp when the comment was created.
      - name: source_partition_timestamp
        description: >
          The timestamp when the data was processed in the pipeline. Used for partitioning 
          and tracking data freshness.
